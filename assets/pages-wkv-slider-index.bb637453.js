import{_ as e}from"./wk-section.2b55a4c5.js";import{_ as l,j as a,s as t,r as s,v as d,o as u,c as o,w as n,e as m,m as i,u as r,f as c,t as p,n as f,i as v,d as _,h as w}from"./index-a48bd7da.js";import{r as V}from"./uni-app.es.d062ec48.js";const h=l({__name:"wkv-slider",props:{min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},disabled:{type:Boolean,default:!1},modelValue:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:l}){const _=e,w=a((()=>{const{modelValue:e,min:l,max:a}=_;return(e-l)/(a-l)*100+"%"})),V=a((()=>_.max.toString().length/1.5+"em"));t((()=>_.modelValue),(()=>{const{min:e,max:a,step:t,modelValue:s}=_,d=b(s);d!==s&&console.warn(`${s} 不在有效范围 [${e},${a}](步长 ${t})，自动重置为 ${d}`),l("update:modelValue",d)}),{immediate:!0}),t((()=>[_.min,_.max,_.step]),(()=>{const{min:e,max:l,step:a}=_;Number.isInteger((l-e)/a)||console.warn("step 取值必须大于 0，并且可被 (max - min) 整除")}),{immediate:!0});const h="HANDLER_ID",x=s({left:0,width:0});d((()=>{const e=document.getElementById(h);x.value={left:e.offsetLeft,width:e.clientWidth}}));const k=e=>{if(_.disabled)return;const{pageX:a}=e.touches[0],{left:t,width:s}=x.value,d=(a-t)/s,{min:u,max:o,step:n}=_,m=Math.floor((o-u)*d+u);l("update:modelValue",b(m))};function b(e){const{min:l,max:a,step:t}=_;return e=Math.max(Math.min(e,a),l),e=Math.floor((e-l)/t)*t+l}return(l,a)=>{const t=v;return u(),o(t,{class:f({"wkv-slider":!0,"wkv-slider--disabled":e.disabled}),style:i({"--wkv-slider-progress":r(w)})},{default:n((()=>[m(t,{class:"wkv-slider-handler",id:h,onTouchstart:k,onTouchmove:k},{default:n((()=>[m(t,{class:"wkv-slider-handler__track"}),m(t,{class:"wkv-slider-handler__thumb"})])),_:1}),m(t,{class:"wkv-slider-value",style:i({"--wkv-slider-value-width":r(V)})},{default:n((()=>[c(p(e.modelValue),1)])),_:1},8,["style"])])),_:1},8,["class","style"])}}},[["__scopeId","data-v-1c2a55b1"]]),x=l(_({__name:"index",setup(l){const a=s(66),t=s(8),d=s(30),i=s(50);return(l,s)=>{const r=V(w("wk-section"),e),p=V(w("wkv-slider"),h),f=v;return u(),o(f,{class:"wkv-slider-example"},{default:n((()=>[m(r,null,{default:n((()=>[c("默认")])),_:1}),m(p,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=e=>a.value=e)},null,8,["modelValue"]),m(r,null,{default:n((()=>[c("最小值/最大值")])),_:1}),m(p,{min:5,max:10,modelValue:t.value,"onUpdate:modelValue":s[1]||(s[1]=e=>t.value=e)},null,8,["modelValue"]),m(r,null,{default:n((()=>[c("步长")])),_:1}),m(p,{step:10,modelValue:d.value,"onUpdate:modelValue":s[2]||(s[2]=e=>d.value=e)},null,8,["modelValue"]),m(r,null,{default:n((()=>[c("禁用")])),_:1}),m(p,{disabled:"",modelValue:i.value,"onUpdate:modelValue":s[3]||(s[3]=e=>i.value=e)},null,8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-c24c6632"]]);export{x as default};
