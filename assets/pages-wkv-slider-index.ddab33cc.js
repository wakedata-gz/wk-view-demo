import{_ as e}from"./wk-section.de985070.js";import{_ as l,j as a,s as t,r as s,v as u,o as d,c as o,w as n,e as m,m as r,u as i,f as c,t as p,n as v,i as f,d as _,h as V}from"./index-7021cc54.js";import{r as w}from"./uni-app.es.80ff61f5.js";const h=l({__name:"wkv-slider",props:{min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},disabled:{type:Boolean,default:!1},modelValue:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:l}){const _=e,V=a((()=>{const{modelValue:e,min:l,max:a}=_;return(e-l)/(a-l)*100+"%"})),w=a((()=>_.max.toString().length/1.5+"em"));t((()=>_.modelValue),(()=>{const{min:e,max:a,step:t,modelValue:s}=_,u=b(s);u!==s&&console.warn(`${s} 不在有效范围 [${e},${a}](步长 ${t})，自动重置为 ${u}`),l("update:modelValue",u)}),{immediate:!0}),t((()=>[_.min,_.max,_.step]),(()=>{const{min:e,max:l,step:a}=_;Number.isInteger((l-e)/a)||console.warn("step 取值必须大于 0，并且可被 (max - min) 整除")}),{immediate:!0});const h="HANDLER_ID",x=s({left:0,width:0});u((()=>{uni.createSelectorQuery().select("#HANDLER_ID").boundingClientRect((e=>x.value=e)).exec()}));const k=e=>{if(_.disabled)return;const{pageX:a}=e.touches[0],{left:t,width:s}=x.value,u=(a-t)/s,{min:d,max:o,step:n}=_,m=Math.floor((o-d)*u+d);l("update:modelValue",b(m))};function b(e){const{min:l,max:a,step:t}=_;return e=Math.max(Math.min(e,a),l),e=Math.floor((e-l)/t)*t+l}return(l,a)=>{const t=f;return d(),o(t,{class:v({"wkv-slider":!0,"wkv-slider--disabled":e.disabled}),style:r({"--wkv-slider-progress":i(V)})},{default:n((()=>[m(t,{class:"wkv-slider-handler",id:h,onTouchstart:k,onTouchmove:k},{default:n((()=>[m(t,{class:"wkv-slider-handler__track"}),m(t,{class:"wkv-slider-handler__thumb"})])),_:1}),m(t,{class:"wkv-slider-value",style:r({"--wkv-slider-value-width":i(w)})},{default:n((()=>[c(p(e.modelValue),1)])),_:1},8,["style"])])),_:1},8,["class","style"])}}},[["__scopeId","data-v-32c19485"]]),x=l(_({__name:"index",setup(l){const a=s(66),t=s(8),u=s(30),r=s(50);return(l,s)=>{const i=w(V("wk-section"),e),p=w(V("wkv-slider"),h),v=f;return d(),o(v,{class:"wkv-slider-example"},{default:n((()=>[m(i,null,{default:n((()=>[c("默认")])),_:1}),m(p,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=e=>a.value=e)},null,8,["modelValue"]),m(i,null,{default:n((()=>[c("最小值/最大值")])),_:1}),m(p,{min:5,max:10,modelValue:t.value,"onUpdate:modelValue":s[1]||(s[1]=e=>t.value=e)},null,8,["modelValue"]),m(i,null,{default:n((()=>[c("步长")])),_:1}),m(p,{step:10,modelValue:u.value,"onUpdate:modelValue":s[2]||(s[2]=e=>u.value=e)},null,8,["modelValue"]),m(i,null,{default:n((()=>[c("禁用")])),_:1}),m(p,{disabled:"",modelValue:r.value,"onUpdate:modelValue":s[3]||(s[3]=e=>r.value=e)},null,8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-c24c6632"]]);export{x as default};
